
# üß† –ö–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä CHIP-8

## –í–≤–µ–¥–µ–Ω–∏–µ

CHIP-8 ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –≤ 1970-—Ö –≥–æ–¥–∞—Ö –î–∂–æ–∑–µ—Ñ–æ–º –í–∞–π—Å–±–µ–∫–µ—Ä–æ–º –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–≥—Ä –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö. –û–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É —Å –ø—Ä–æ—Å—Ç—ã–º –Ω–∞–±–æ—Ä–æ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –æ—Ç–ª–∏—á–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –æ—Å–Ω–æ–≤ —ç–º—É–ª—è—Ü–∏–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ CHIP-8

### –ü–∞–º—è—Ç—å

- **–û–±—ä–µ–º**: 4 –ö–ë (4096 –±–∞–π—Ç)
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ**:
  - `0x000‚Äì0x1FF`: –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞
  - `0x050‚Äì0x0A0`: —à—Ä–∏—Ñ—Ç (—Å–ø—Ä–∞–π—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤ 0‚ÄìF)
  - `0x200‚Äì0xFFF`: –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –¥–∞–Ω–Ω—ã–µ

### –†–µ–≥–∏—Å—Ç—Ä—ã

- **V0‚ÄìVF**: 16 8-–±–∏—Ç–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- **I**: 16-–±–∏—Ç–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä –∏–Ω–¥–µ–∫—Å–∞
- **PC**: 16-–±–∏—Ç–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥ (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `0x200`)
- **SP**: —É–∫–∞–∑–∞—Ç–µ–ª—å —Å—Ç–µ–∫–∞
- **Stack**: —Å—Ç–µ–∫ –∏–∑ 16 —É—Ä–æ–≤–Ω–µ–π –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤ –≤–æ–∑–≤—Ä–∞—Ç–∞
- **Timers**:
  - **Delay Timer**: —É–º–µ–Ω—å—à–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ 1 —Å —á–∞—Å—Ç–æ—Ç–æ–π 60 –ì—Ü
  - **Sound Timer**: –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –Ω–æ –ø—Ä–∏ –Ω–µ–Ω—É–ª–µ–≤–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏ –∏–∑–¥–∞–µ—Ç –∑–≤—É–∫

### –ì—Ä–∞—Ñ–∏–∫–∞

- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ**: 64x32 –ø–∏–∫—Å–µ–ª—è
- **–¶–≤–µ—Ç–∞**: —á–µ—Ä–Ω–æ-–±–µ–ª–∞—è –≥—Ä–∞—Ñ–∏–∫–∞
- **–≠–∫—Ä–∞–Ω**: –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –º–∞—Å—Å–∏–≤ –∏–∑ 2048 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (`64 * 32`)

### –í–≤–æ–¥

- **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞**: 16 –∫–ª–∞–≤–∏—à, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º (`0x0‚Äì0xF`)

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```c
unsigned short opcode;
unsigned char memory[4096];
unsigned char V[16];
unsigned short I;
unsigned short pc;
unsigned char gfx[64 * 32];
unsigned char delay_timer;
unsigned char sound_timer;
unsigned short stack[16];
unsigned short sp;
unsigned char key[16];
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–∞

```c
unsigned char chip8_fontset[80] = {
  // –°–ø—Ä–∞–π—Ç—ã —Å–∏–º–≤–æ–ª–æ–≤ 0‚ÄìF
};

for(int i = 0; i < 80; ++i)
  memory[0x050 + i] = chip8_fontset[i];
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã

```c
FILE *program = fopen("program.ch8", "rb");
fread(&memory[0x200], 1, program_size, program);
fclose(program);
```

### –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª

```c
for (;;) {
  opcode = memory[pc] << 8 | memory[pc + 1];
  // –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–æ–≤
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥

```c
case 0x00E0:
  memset(gfx, 0, sizeof(gfx));
  pc += 2;
  break;
```

### –¢–∞–π–º–µ—Ä—ã

```c
if (delay_timer > 0)
  --delay_timer;

if (sound_timer > 0) {
  if (sound_timer == 1)
    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫
  --sound_timer;
}
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ CHIP-8 ‚Äî –æ—Ç–ª–∏—á–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω. –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –ø—Ä–æ–µ–∫—Ç, –¥–æ–±–∞–≤–∏–≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –≥—Ä–∞—Ñ–∏–∫–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫, —Ç–∞–∫–∏—Ö –∫–∞–∫ SDL, –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–≤–æ–¥–∞ –∏ –∑–≤—É–∫–∞.

[–ò—Å—Ç–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç—å–∏](https://multigesture.net/articles/how-to-write-an-emulator-chip-8-interpreter/)
